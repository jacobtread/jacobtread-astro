---
import { CollectionEntry } from "astro:content";
import GitHub from "./icons/GitHub.astro";

type Props = CollectionEntry<"projects">;

const {
  data: { title, tags, links },
  render,
} = Astro.props;

const DEFAULT_NAMES: Record<string, string> = {
  GITHUB: "Github",
  WEBSITE: "View Website",
};

const { Content } = await render();
---

<li class="project">
  <div>
    <h2 class="project__title">{title}</h2>
    <Content />
  </div>

  <div>
    <ul class="project__tags">
      {tags.map((tag) => <li class="project__tag">{tag}</li>)}
    </ul>
    <ul class="project__links">
      {
        links.map((link) => {
          const name = link.name ?? DEFAULT_NAMES[link.type];
          return (
            <li>
              <a
                class="project__link"
                target="_blank"
                rel="noreferrer noopener"
                href={link.link}
              >
                {link.type === "GITHUB" && <GitHub class="github" />}
                {name}
              </a>
            </li>
          );
        })
      }
    </ul>
  </div>
</li>

<style is:global>
  .project p {
    margin: 1rem 0;
    font-size: 1.1rem;
    color: #999;
  }

  @media screen and (max-width: 48rem) {
    .project p {
      font-size: 1rem;
    }
  }
</style>

<style>
  .github {
    width: 100%;
    max-width: 1.25rem;
    height: auto;
    margin-right: 0.5rem;
  }

  .project {
    display: grid;
    grid-template-columns: 1fr;
    justify-content: space-between;
    align-content: space-between;

    position: relative;
    color: #fff;
    background-color: #222;
    padding: 1.5rem;
    text-align: left;
    gap: 1rem;
    text-decoration: none;
    border-radius: 0.25rem;
    border: 1px solid #333;
    transition: background-color 0.25s ease;
  }

  .project:first-child {
    grid-column: 1 / 3;
  }

  .project__tags {
    list-style: none;
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
    color: #777;
    flex-flow: row wrap;
  }

  .project__links {
    list-style: none;
    display: flex;
    gap: 1rem;
    flex-flow: row wrap;
  }

  .project__link {
    display: flex;
    padding: 1rem;
    background-color: #333;
    color: #fff;
    font-weight: bold;
    border-radius: 0.25rem;
    text-decoration: none;
    font-size: 1.2rem;
    transition: background-color 0.25s ease;
  }

  .project__link:hover {
    background-color: #62a563;
  }

  @media screen and (max-width: 64rem) {
    .project:first-child {
      grid-column: 1 / 2;
    }
  }
</style>
